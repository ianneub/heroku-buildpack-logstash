API_SOURCE (print-api|dev-print-api|demo-print-api)
API_SOURCE_FIELD %{API_SOURCE:api_source}
PAPERTRAIL_PREFIX %{NUMBER}\t%{TIMESTAMP_ISO8601:ts}\t%{TIMESTAMP_ISO8601}\t%{NUMBER}\t%{API_SOURCE_FIELD}\t%{IP:host}
REQUEST_LOG LoggingFilter: Request log:
DURATION duration: %{NUMBER:duration}ms
STATUS status: %{NUMBER:status}
USERNAME [\p{Alnum}_]*
COLLECTION_NAME %{USERNAME},[\p{Alnum} +!&.$@'-]*
AUTH_USER \[au: %{NUMBER:auth_user}\]
AUTH_USER_AND_NAME \[au: %{NUMBER:auth_user},%{USERNAME:auth_user_name}\]
USER_ID_AND_NAME \[uid: %{NUMBER:uid},%{USERNAME:user_name}\]
COLLECTION_ID_AND_NAME \[cid: %{NUMBER:cid},%{COLLECTION_NAME:collection_name}\]
RAW_USER_AGENT [\p{Alnum} ;.()/]*

[ua: Steller/240 (iPhone; iOS 7.0; Scale/2.00)]
STELLER (Steller|Curator|Player)
STELLER_USER_AGENT \[ua: %{STELLER:steller_product_base}/%{NUMBER:steller_build}

USER_AGENT \[ua: %{RAW_USER_AGENT:raw_ua}\]
VERBS (GET|PUT|DELETE|POST)

API_DATE %{YEAR}-%{MONTHNUM}-%{MONTHDAY}
API_TIMESTAMP %{API_DATE} %{TIME}

API_META_DATA %{DURATION}.*%{STATUS}
AUTH_USER_DATA %{AUTH_USER}
AUTH_USER_WITH_NAME %{AUTH_USER_AND_NAME}
USER_WITH_NAME %{USER_ID_AND_NAME}
COLLECTION_WITH_NAME %{COLLECTION_ID_AND_NAME}

COLLECTION_API_WITH_ID /v1/collections/%{NUMBER:collection_id}
STORY_API_WITH_ID /v1/stories/%{NUMBER:story_id}
TEMPLATES_API_WITH_ID /v1/templates/%{NUMBER:template_id}
USER_API_WITH_ID /v1/users/%{NUMBER:user_id}

PRIMARY_IDS (%{COLLECTION_API_WITH_ID}|%{STORY_API_WITH_ID}|%{TEMPLATES_API_WITH_ID}|%{USER_API_WITH_ID})

USER_API_FOLLOWERS /v1/users/%{NUMBER}/followers/%{NUMBER:follower_id}
COLLECTION_API_STORIES /v1/collections/%{NUMBER}/stories/%{NUMBER:story_id}
COLLECTION_API_FOLLOWERS /v1/collections/%{NUMBER}/followers/%{NUMBER:follower_id}
STORY_API_LIKERS /v1/stories/%{NUMBER}/likes/%{NUMBER:liker_id}

SECONDARY_IDS (%{USER_API_FOLLOWERS}|%{COLLECTION_API_STORIES}|%{COLLECTION_API_FOLLOWERS}|%{STORY_API_LIKERS})
